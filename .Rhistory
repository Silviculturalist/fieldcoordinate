filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1,Sy=1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(0)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1.1,Sy=1.1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(0)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
start_csv <- read.csv(file = "matched_trees/542/542_2015_to_2019.csv") %>% as.coord.data.frame(id=id,x=x,y=y,Diameter,Species,Year)
corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1.1,Sy=1.1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(0)) #%>%
target_csv <-
start_csv %>%
filter(Year==2019) #%>%
write.csv(x=bind_rows(corrected_csv,target_csv),file="matched_trees/542/542_2015_to_2019_corrected.csv",row.names = FALSE)
start_csv <- read.csv(file = "matched_trees/543/543_2015_to_2019.csv") %>% as.coord.data.frame(id=id,x=x,y=y,Diameter,Species,Year)
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1.1,Sy=1.1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(0)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1,Sy=1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(0)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1.1,Sy=1.1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(0)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1.1,Sy=1.1) %>%
translate_coordinates(x=0.5,y=0) %>%
coordinate_rotation(degree_to_radian(0)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1.1,Sy=1.1) %>%
translate_coordinates(x=0.1,y=0) %>%
coordinate_rotation(degree_to_radian(0)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1.1,Sy=1.1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(0)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1.1,Sy=1.1) %>%
translate_coordinates(x=-0.5,y=0) %>%
coordinate_rotation(degree_to_radian(0)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
start_csv <- read.csv(file = "matched_trees/543/543_2015_to_2019.csv") %>% as.coord.data.frame(id=id,x=x,y=y,Diameter,Species,Year)
corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1.1,Sy=1.1) %>%
translate_coordinates(x=-0.5,y=0) %>%
coordinate_rotation(degree_to_radian(0)) #%>%
target_csv <-
start_csv %>%
filter(Year==2019) #%>%
write.csv(x=bind_rows(corrected_csv,target_csv),file="matched_trees/543/543_2015_to_2019_corrected.csv",row.names = FALSE)
start_csv <- read.csv(file = "matched_trees/1046/1046_2015_to_2019.csv") %>% as.coord.data.frame(id=id,x=x,y=y,Diameter,Species,Year)
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1,Sy=1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(0)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1,Sy=1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(-10)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1,Sy=1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(-15)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1,Sy=1.2) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(-15)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
#corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1,Sy=1.1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(-15)) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position = "none")
#target_csv <-
start_csv %>%
filter(Year==2019) %>%
filter_radius() %>%
plot(size=Diameter,color=factor(Species))+theme(legend.position="none")
start_csv <- read.csv(file = "matched_trees/1046/1046_2015_to_2019.csv") %>% as.coord.data.frame(id=id,x=x,y=y,Diameter,Species,Year)
corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1,Sy=1.1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(-15)) #%>%
#target_csv <-
start_csv %>%
filter(Year==2019) #%>%
target_csv <-
start_csv %>%
filter(Year==2019) #%>%
write.csv(x=bind_rows(corrected_csv,target_csv),file="matched_trees/1046/1046_2015_to_2019_corrected.csv",row.names = FALSE)
start_csv <- read.csv(file = "matched_trees/1046/1046_2015_to_2019.csv") %>% as.coord.data.frame(id=id,x=x,y=y,Diameter,Species,Year)
corrected_csv <-
start_csv %>%
filter(Year==2015) %>%
scale_coordinates(Sx=1,Sy=1.1) %>%
translate_coordinates(x=0,y=0) %>%
coordinate_rotation(degree_to_radian(-15)) #%>%
target_csv <-
start_csv %>%
filter(Year==2019) #%>%
write.csv(x=bind_rows(corrected_csv,target_csv),file="matched_trees/1046/1046_2015_to_2019_corrected.csv",row.names = FALSE)
rep(0,100)
Rcpp::sourceCpp("BALi.cpp")
Rcpp::sourceCpp("BALi.cpp")
Rcpp::sourceCpp("distBAL.cpp")
distBAL(1:100,rep(0,100),rep(0,100),1)
distBAL(c(1:49,NA,51:100),rep(0,100),rep(0,100),1)
distBAL(c(1:49,NA,51:100),c(rep(0,99),NA),rep(0,100),1)
distBAL(c(1:49,NA,51:100),c(rep(0,99),NaN),rep(0,100),1)
distBAL(c(1:49,NA,51:100),c(rep(0,99),NaN),c(rep(0,99),100),1)
distBAL(c(1:49,NA,51:100),c(rep(0,99),NaN),c(rep(0,99),0),1)
distBAL(c(1:49,NA,51:100),c(rep(0,99),NaN),c(rep(0,99),NA_real_),1)
Rcpp::sourceCpp("distBAL.cpp")
Rcpp::sourceCpp("BAL.cpp")
Rcpp::sourceCpp("BAL.cpp")
library(tidyverse)
data.frame(diameter=1:100) %>% mutate(BAL= BAL(diameter))
data.frame(diameter=1:100,x=0,y=0) %>% mutate(BAL= BALdist(diameter))
data.frame(diameter=1:100,x=0,y=0)
data.frame(diameter=1:100,x=0,y=0) %>% mutate(BAL = BALdist(diameter,x,y,distance=1))
data.frame(diameter=1:100,x=0,y=0) %>% mutate(BAL = distBAL(diameter = diameter,x = x,y = y,distance=1))
Rcpp::sourceCpp("centralise_2D.cpp")
Rcpp::sourceCpp("centralise_2D.cpp")
Rcpp::sourceCpp("centralise_2D.cpp")
Rcpp::sourceCpp("centralise_2D.cpp")
Rcpp::sourceCpp("centralise_2D.cpp")
Rcpp::sourceCpp("centralise_2D.cpp")
Rcpp::sourceCpp("centralise_2D.cpp")
Rcpp::sourceCpp("centralise_2D.cpp")
Rcpp::sourceCpp("centralise_2D.cpp")
centraliseCoordinates(c(rep(5,5),1))
sf::meuse
library(sf)
?st_point
st_point(x=c(runif(20),runif(20)))
st_point(x=matrix(runif(20),runif(20)))
matrix(runif(20))
matrix(runif(20),runif(20))
matrix(runif(40),ncol = 2)
st_point(matrix(runif(40),ncol = 2))
st_point(c(1,2,3),dim="XYM")
st_point(c(1,2,3),dim="XYZ")
st_multipoint(matrix(runif(20)))
st_multipoint(matrix(runif(20),ncol=2))
plot(st_multipoint(matrix(runif(20),ncol=2)))
a <- (st_multipoint(matrix(runif(20),ncol=2)))
a
str(a)
View(a)
a <- (st_multipoint(matrix(runif(40),ncol=3)))
a <- (st_multipoint(matrix(runif(60),ncol=3)))
a
a <- (st_multipoint(matrix(runif(60),ncol=3),"XYM"))
a
plot(m)
plot(a)
a <- (st_multipoint(matrix(runif(60),ncol=3),"XY>"))
a <- (st_multipoint(matrix(runif(60),ncol=3),"XYZ"))
plot(a)
View(a)
a[[1]]
a[1]
a[][1]
a[[1]]
as.data.frame(a)
centroid(st_multipoint(matrix(runif(60),ncol=3),"XYZ"))
st_centroid(st_multipoint(matrix(runif(60),ncol=3),"XYZ"))
plot(st_centroid(st_multipoint(matrix(runif(60),ncol=3),"XYZ")),add=TRUE,color="red")
plot(st_centroid(st_multipoint(matrix(runif(60),ncol=3),"XYZ")),add=TRUE,col="red")
plot(st_centroid(st_multipoint(matrix(runif(60),ncol=3),"XYZ")),add=TRUE,col="red")
?st_centroid
str(a)
class(a)
plot(st_centroid(st_multipoint(matrix(c(runif(59),NA),ncol=3),"XYZ")),add=TRUE,col="red")
st_poitn
st_point
getClassDim
sf:::getClassDim
sf::st_sf(a)
sf::st_sfc(a)
?=sf::st_sfc
?sf::st_sfc
a <- st_point(c(1,2,3))
a
sf::st_sfc(a)
b <- st_point(2,3,4)
b <- st_point(c(2,3,4))
sf::st_sfc(a,b)
st::sf(id=1:2,sf::st_sfc(a,b))
st_sf(id=1:2,sf::st_sfc(a,b))
plot(st_sf(id=1:2,sf::st_sfc(a,b)))
str(st_sf(id=1:2,sf::st_sfc(a,b)))
tree_coords <- read.csv(file = "~/Desktop/2007_2019_Krycklan_SurveyData/Calibration_check/trees_coords.csv",sep=";")
tree_coords %>% filter(species%in%1:2)
tree_coords %>% filter(Species%in%c(1,2),!is.na(Age))
tree_coords %>% filter(!is.na(Age))
tree_coords %>% filter(!is.na(Age),TreeType==1)
Gran <- tree_coords %>% filter(!is.na(Age),TreeType==1)
pine <- tree_coords %>% filter(!is.na(Age),TreeType==1,!is.na(Height))
spruce <- tree_coords %>% filter(!is.na(Age),TreeType==2,!is.na(Height))
pine
pine <- tree_coords %>% filter(!is.na(Age),Species==10,!is.na(Height))
spruce <- tree_coords %>% filter(!is.na(Age),Species==20,!is.na(Height))
pien
pine
rbind(pine,spruce)
library(tidyverse)
ggplot(rbind(pine,spruce),aes(x=Age,y=Height)+geom_point()+facet_wrap("Species")
ggplot(rbind(pine,spruce),aes(x=Age,y=Height))+geom_point()+facet_wrap("Species")
max(pine$Age)
which(pine$Age==738)
pine[221]
pine[221,]
pine[221,] <- NA
pine <- tree_coords %>% filter(!is.na(Age),Species==10,!is.na(Height))
pine[221,] <- NA
pine[221,]
pine <- tree_coords %>% filter(!is.na(Age),Species==10,!is.na(Height),Age<400)
ggplot(rbind(pine,spruce),aes(x=Age,y=Height))+geom_point()+facet_wrap("Species")
ggplot(rbind(pine,spruce),aes(x=Age,y=Height/10))+geom_point()+facet_wrap("Species")
tree_coords <- read.csv(file = "~/Desktop/2007_2019_Krycklan_SurveyData/Calibration_check/trees_coords.csv",sep=";")
tree_coords <- tree_coords %>% mutate(standtype=stringr::str_extract(string=tree_coords$StandId,pattern="^Circular\\d+"))
tree_coords <- tree_coords %>% mutate(Year=stringr::str_extract(string=tree_coords2$StandId,pattern="20\\d+"))
tree_coords <- tree_coords %>% mutate(standnumber=case_when(stringr::str_count(tree_coords2$StandId,pattern="_\\d+")>2 ~ stringr::str_extract(string = tree_coords2$StandId,pattern="\\d+_\\d+$"),
TRUE ~ stringr::str_extract(string=tree_coords2$StandId,pattern="\\d+$")))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords2$standnumber,"_\\d+$"))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords2$standnr2,"\\d+$"))
tree_coords <- tree_coords %>% mutate(standnumber=str_extract(tree_coords2$standnumber,"^\\d+(?=[:punct:])|^\\d+$"))
#Only interested in 10 m radius diameter plots.
tree_coords <- tree_coords %>% filter(standtype=="Circular10")
#Neither of following columns contribute information
tree_coords <- tree_coords %>% select(-c(AreaLevel2,AreaLevel3,StandId,Plotname))
tree_coords <- read.csv(file = "~/Desktop/2007_2019_Krycklan_SurveyData/Calibration_check/trees_coords.csv",sep=";")
tree_coords <- tree_coords %>% mutate(standtype=stringr::str_extract(string=tree_coords$StandId,pattern="^Circular\\d+"))
tree_coords <- tree_coords %>% mutate(Year=stringr::str_extract(string=tree_coords$StandId,pattern="20\\d+"))
tree_coords <- tree_coords %>% mutate(standnumber=case_when(stringr::str_count(tree_coords2$StandId,pattern="_\\d+")>2 ~ stringr::str_extract(string = tree_coords$StandId,pattern="\\d+_\\d+$"),
TRUE ~ stringr::str_extract(string=tree_coords$StandId,pattern="\\d+$")))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords$standnumber,"_\\d+$"))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords$standnr2,"\\d+$"))
tree_coords <- tree_coords %>% mutate(standnumber=str_extract(tree_coords$standnumber,"^\\d+(?=[:punct:])|^\\d+$"))
tree_coords <- read.csv(file = "~/Desktop/2007_2019_Krycklan_SurveyData/Calibration_check/trees_coords.csv",sep=";")
tree_coords <- tree_coords %>% mutate(standtype=stringr::str_extract(string=tree_coords$StandId,pattern="^Circular\\d+"))
tree_coords %>% glimpse()
tree_coords <- tree_coords %>% mutate(Year=stringr::str_extract(string=tree_coords$StandId,pattern="20\\d+"))
tree_coords %>% glimpse()
tree_coords <- tree_coords %>% mutate(standnumber=case_when(stringr::str_count(tree_coords2$StandId,pattern="_\\d+")>2 ~ stringr::str_extract(string = tree_coords$StandId,pattern="\\d+_\\d+$"),
TRUE ~ stringr::str_extract(string=tree_coords$StandId,pattern="\\d+$")))
tree_coords <- tree_coords %>% mutate(standnumber=case_when(stringr::str_count(tree_coords$StandId,pattern="_\\d+")>2 ~ stringr::str_extract(string = tree_coords$StandId,pattern="\\d+_\\d+$"),
TRUE ~ stringr::str_extract(string=tree_coords$StandId,pattern="\\d+$")))
tree_coords %>% glimpse()
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords$standnumber,"_\\d+$"))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords$standnr2,"\\d+$"))
tree_coords <- tree_coords %>% mutate(standnumber=str_extract(tree_coords$standnumber,"^\\d+(?=[:punct:])|^\\d+$"))
tree_coords %>% glimpse()
any(!is.na(tree_coords$standnr2))
which(!is.na(tree_coords$standnr2))
tree_coords[which(!is.na(tree_coords$standnr2))]
tree_coords[which(!is.na(tree_coords$standnr2)),]
table(tree_coords[which(!is.na(tree_coords$standnr2)),][,standnr2]
)
table(tree_coords[which(!is.na(tree_coords$standnr2)),][,"standnr2"])
table(tree_coords[which(!is.na(tree_coords$standnr2)),][,"standnr2"],tree_coords[which(!is.na(tree_coords$standnr2)),][,"standnr"])
table(tree_coords[which(!is.na(tree_coords$standnr2)),][,"standnr2"],tree_coords[which(!is.na(tree_coords$standnr2)),][,"standnumber"])
#Only interested in 10 m radius diameter plots.
tree_coords <- tree_coords %>% filter(standtype=="Circular10")
table(tree_coords[which(!is.na(tree_coords$standnr2)),][,"standnr2"],tree_coords[which(!is.na(tree_coords$standnr2)),][,"standnumber"])
unique(tree_coords$standtype)
unique(tree_coords$standnr2)
pine <- tree_coords %>% filter(!is.na(Age),Species==10,!is.na(Height),Age<400)
spruce <- tree_coords %>% filter(!is.na(Age),Species==20,!is.na(Height))
pine
tree_coords <- read.csv(file = "~/Desktop/2007_2019_Krycklan_SurveyData/Calibration_check/trees_coords.csv",sep=";")
tree_coords <- tree_coords %>% mutate(standtype=stringr::str_extract(string=tree_coords$StandId,pattern="^Circular\\d+"))
tree_coords <- tree_coords %>% mutate(Year=stringr::str_extract(string=tree_coords$StandId,pattern="20\\d+"))
tree_coords <- tree_coords %>% mutate(standnumber=case_when(stringr::str_count(tree_coords$StandId,pattern="_\\d+")>2 ~ stringr::str_extract(string = tree_coords$StandId,pattern="\\d+_\\d+$"),
TRUE ~ stringr::str_extract(string=tree_coords$StandId,pattern="\\d+$")))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords$standnumber,"_\\d+$"))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords$standnr2,"\\d+$"))
tree_coords <- tree_coords %>% mutate(standnumber=str_extract(tree_coords$standnumber,"^\\d+(?=[:punct:])|^\\d+$"))
pine <- tree_coords %>% filter(!is.na(Age),Species==10,!is.na(Height),Age<400)
#remove tree with age 738 and height 212.
pine %>% glimpse()
table(unique(pine$standnumber,pine$standnr2))
table(unique(pine$standnumber:pine$standnr2))
pine %>% expand(standnumber,standnr2)
pine %>% expand(standnumber,standnr2) %>% table()
pine %>% expand(standnumber,standnr2) %>% table() %>% View()
tree_coords %>% expand(standnumber,standnr2) %>% table() %>% View()
tree_coords <- read.csv(file = "~/Desktop/2007_2019_Krycklan_SurveyData/Calibration_check/trees_coords.csv",sep=";")
tree_coords2 <- tree_coords %>% mutate(standtype=stringr::str_extract(string=tree_coords$StandId,pattern="^Circular\\d+"))
tree_coords2 <- tree_coords2 %>% mutate(Year=stringr::str_extract(string=tree_coords2$StandId,pattern="20\\d+"))
tree_coords2 <- tree_coords2 %>% mutate(standnumber=case_when(stringr::str_count(tree_coords2$StandId,pattern="_\\d+")>2 ~ stringr::str_extract(string = tree_coords2$StandId,pattern="\\d+_\\d+$"),
TRUE ~ stringr::str_extract(string=tree_coords2$StandId,pattern="\\d+$")))
tree_coords2 <- tree_coords2 %>% mutate(standnr2=str_extract(tree_coords2$standnumber,"_\\d+$"))
tree_coords2 <- tree_coords2 %>% mutate(standnr2=str_extract(tree_coords2$standnr2,"\\d+$"))
tree_coords2 <- tree_coords2 %>% mutate(standnumber=str_extract(tree_coords2$standnumber,"^\\d+(?=[:punct:])|^\\d+$"))
#Only interested in 10 m radius diameter plots.
tree_coords2 <- tree_coords2 %>% filter(standtype=="Circular10")
#Neither of following columns contribute information
tree_coords2 <- tree_coords2 %>% select(-c(AreaLevel2,AreaLevel3,StandId,Plotname))
tree_coords2 %>% group_by(standnumber,standnr2) %>% filter(Age==2008, Age==2019,.group)
tree_coords2 %>% group_by(standnumber,standnr2) %>% filter(Age==2008, Age==2019)
unique(tree_coords2$standnr2)
tree_coords2 %>% expand(standnumber,standnr2)
tree_coords2 %>% expand(standnumber,standnr2) %>% table()
tree_coords2 %>% expand(standnumber,standnr2) %>% table() %>% View()
tree_coords2 %>% count(unique(standnr2))
tree_coords2 %>% table(standnr)
tree_coords2 %>% table(standnr2)
table(tree_coords2$standnr2)
tree_coords2[is.na(tree_coords2$standnr2)]
tree_coords2[is.na(tree_coords2$standnr2),]
table(tree_coords2[is.na(tree_coords2$standnr2),])
table(tree_coords2[is.na(tree_coords2$standnr2),]$standnumber)
tree_coords <- read.csv(file = "~/Desktop/2007_2019_Krycklan_SurveyData/Calibration_check/trees_coords.csv",sep=";")
tree_coords <- tree_coords %>% mutate(standtype=stringr::str_extract(string=tree_coords$StandId,pattern="^Circular\\d+"))
tree_coords <- tree_coords %>% mutate(Year=stringr::str_extract(string=tree_coords$StandId,pattern="20\\d+"))
tree_coords <- tree_coords %>% mutate(standnumber=case_when(stringr::str_count(tree_coords$StandId,pattern="_\\d+")>2 ~ stringr::str_extract(string = tree_coords$StandId,pattern="\\d+_\\d+$"),
TRUE ~ stringr::str_extract(string=tree_coords$StandId,pattern="\\d+$")))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords$standnumber,"_\\d+$"))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords$standnr2,"\\d+$"))
tree_coords <- tree_coords %>% mutate(standnumber=str_extract(tree_coords$standnumber,"^\\d+(?=[:punct:])|^\\d+$"))
library(tidyverse)
tree_coords <- read.csv(file = "~/Desktop/2007_2019_Krycklan_SurveyData/Calibration_check/trees_coords.csv",sep=";")
tree_coords <- tree_coords %>% mutate(standtype=stringr::str_extract(string=tree_coords$StandId,pattern="^Circular\\d+"))
tree_coords <- tree_coords %>% mutate(Year=stringr::str_extract(string=tree_coords$StandId,pattern="20\\d+"))
tree_coords <- tree_coords %>% mutate(standnumber=case_when(stringr::str_count(tree_coords$StandId,pattern="_\\d+")>2 ~ stringr::str_extract(string = tree_coords$StandId,pattern="\\d+_\\d+$"),
TRUE ~ stringr::str_extract(string=tree_coords$StandId,pattern="\\d+$")))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords$standnumber,"_\\d+$"))
tree_coords <- tree_coords %>% mutate(standnr2=str_extract(tree_coords$standnr2,"\\d+$"))
tree_coords <- tree_coords %>% mutate(standnumber=str_extract(tree_coords$standnumber,"^\\d+(?=[:punct:])|^\\d+$"))
tree_coords %>% glimpse()
tree_coords <- tree_coords %>% filter(!is.na(Age),!is.na(Height))
table(expand(tree_coords$standnumber,tree_coords$standnr2))
table(tree_coords$standnumber,tree_coords$standnr2)
table(tree_coords$standnumber,tree_coords$standnr2) %>% View()
tree_coords %>% filter(standnumber==31818)
tree_coords$Plotname
tree_coords <- read.csv(file = "~/Desktop/2007_2019_Krycklan_SurveyData/Calibration_check/trees_coords.csv",sep=";")
tree_coords2 <- tree_coords %>% mutate(standtype=stringr::str_extract(string=tree_coords$StandId,pattern="^Circular\\d+"))
tree_coords2 <- tree_coords2 %>% mutate(Year=stringr::str_extract(string=tree_coords2$StandId,pattern="20\\d+"))
tree_coords2 <- tree_coords2 %>% mutate(standnumber=case_when(stringr::str_count(tree_coords2$StandId,pattern="_\\d+")>2 ~ stringr::str_extract(string = tree_coords2$StandId,pattern="\\d+_\\d+$"),
TRUE ~ stringr::str_extract(string=tree_coords2$StandId,pattern="\\d+$")))
tree_coords2 <- tree_coords2 %>% mutate(standnr2=str_extract(tree_coords2$standnumber,"_\\d+$"))
tree_coords2 <- tree_coords2 %>% mutate(standnr2=str_extract(tree_coords2$standnr2,"\\d+$"))
tree_coords2 <- tree_coords2 %>% mutate(standnumber=str_extract(tree_coords2$standnumber,"^\\d+(?=[:punct:])|^\\d+$"))
#Only interested in 10 m radius diameter plots.
tree_coords2 <- tree_coords2 %>% filter(standtype=="Circular10")
#Neither of following columns contribute information
tree_coords2 <- tree_coords2 %>% select(-c(AreaLevel2,AreaLevel3,StandId,Plotname))
#Tree species probably govd. by first number.
tree_coords2 <- tree_coords2 %>% mutate(speciesnr = str_extract(Species,pattern = "^\\d"))
#Enforce Species are factors and Diameter numeric
tree_coords2$Species <-as.factor(tree_coords2$Species)
tree_coords2$Diameter <- as.numeric(tree_coords2$Diameter)
#Force trackable ID for all indivduals - different between years.
tree_coords2$guid <- 1:nrow(tree_coords2)
rm(tree_coords)
tree_coords3 <- tree_coords2 %>% rename(id=guid,x=GPSEast,y=GPSNorth)
tree_coords3 %>% group(standnumber,standnr2)
library(tidyverse)
tree_coords3 %>% group_by(standnumber,standnr2)
tree_coords3 %>% filter(standnumber=31818)
tree_coords3 %>% filter(standnumber==31818)
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
data.frame("x"=c(1:12))
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
writeToPointCloud(x=data.frame(x=c(1,2),y=c(2,3)))
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
writeToPointCloud(x=data.frame(x=c(1,2),y=c(2,3)))
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
writeToPointCloud(x = data.frame("x"=c(1:12),"y"=c(1:12),"z"=c(1:12)),filename = "text.txt")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
Rcpp::sourceCpp("pcdCreator.cpp")
library(Rcpp)
Rcpp.package.skeleton('fieldcoordinate')
devtools::build()
devtools::build()
Rcpp::compileAttributes()
